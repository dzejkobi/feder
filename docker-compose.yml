version: '2.1'
# This is applicationâ€™s services configuration for development purposes only.

services:
  db:
    image: mysql:5.7
    command: --character-set-server=utf8 --collation-server=utf8_polish_ci
    ports:
      - "3306"
    environment:
      MYSQL_ROOT_PASSWORD: "password"

  gulp:
    build:
      context: .
      dockerfile: .contrib/docker/Dockerfile.gulp
    ports:
      - "35729:35729"
    volumes:
      - .:/app

  web:
    build:
      context: .
      dockerfile: .contrib/docker/Dockerfile.web
      args:
        PYTHON_VERSION: '${PYTHON_VERSION:-3}'
        DJANGO_VERSION: '${DJANGO_VERSION:-==2.2.*}'
    volumes:
      - .:/code
    environment:
      DATABASE_URL: mysql://root:password@db/feder
      VIRUSTOTAL_API_KEY:
      ATTACHMENTSCANNER_API_KEY:
      ATTACHMENTSCANNER_API_URL:
      METADEFENDER_API_KEY:
    ports:
      - "8000:8000"